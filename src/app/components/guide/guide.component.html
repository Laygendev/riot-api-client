<section class="sub-header background">

	<div class="sub-header-content">
		<div class="wrap-padder">
			<div *ngIf="errorMessage" class="alert alert-danger" role="alert">
				{{errorMessage}}
			</div>

			<ul class="arianne">
				<li>
					<a routerLink="/">Home</a>
					<i class="fas fa-arrow-right"></i>
				</li>
				<li>Make a guide</li>
			</ul>

			<h2>Make a guide</h2>

			<p>Before make a guide, you have to select the <strong>champion</strong> and the <strong>game mode</strong></p>
			<p>Use the dropdown below for select, then you will can create or update a guide</p>

			<div class="dropdown-parent">
				<div ngbDropdown class="dropdown">
					<button appDropdown ngbDropdownToggle class="btn btn-secondary dropdown-toggle" type="button" id="dropdownChampion" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						<span *ngIf="!champion">Champions</span>
						<div *ngIf="champion">
							<img src="http://ddragon.leagueoflegends.com/cdn/{{dataService.realms.data.v}}/img/champion/{{champion.image.full}}" />
							<span>{{champion.name}}</span>
						</div>
					</button>
					<div ngbDropdownMenu class="dropdown-menu dropdown-champion" aria-labelledby="dropdownChampion">
						<div class="search">
							<input appSearch class="form-control form-control-lg" type="text" placeholder="Search by champion name">
						</div>
						<ul>
							<li class="item" *ngFor="let champion of dataService.champions">
								<div (click)="selectChampion(champion)">
									<img src="http://ddragon.leagueoflegends.com/cdn/{{dataService.realms.data.v}}/img/champion/{{champion.image.full}}" />
									<span>{{champion.name}}</span>
								</div>
							</li>
						</ul>
					</div>
				</div>

				<div ngbDropdown class="dropdown">
					<button ngbDropdownToggle class="btn btn-secondary dropdown-toggle" type="button" id="dropdownGameMode" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						<span *ngIf="!gameMode">Game Mode</span>
						<span *ngIf="gameMode">{{gameMode}}</span>
					</button>
					<div ngbDropdownMenu  class="dropdown-menu dropdown-game-mode" aria-labelledby="dropdownGameMode">
						<div class="search">
							<input appSearch class="form-control form-control-lg" type="text" placeholder="Search by game mode name">
						</div>
						<ul>
							<li class="item" *ngFor="let gameMode of gamesMode">
								<div (click)="selectGameMode(gameMode)">
									<span>{{gameMode}}</span>
								</div>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>

<section class="page-secondary">
	<div class="wrap-padder">
		<h2>Favorite guide</h2>

		<p *ngIf="! gameMode || ! champion">Select champion and game mode for view and create guide</p>

		<app-guide-display *ngIf="favoriteGuideId && champion" [gameMode]="gameMode" [champion]="champion"></app-guide-display>

		<div *ngIf="champion && gameMode">
			<h2>
				Availables guides for {{champion.name}} in {{gameMode}}
				<a routerLink="/guide/{{gameMode}}/{{champion.id}}" type="button" class="btn btn-primary">Make new guide</a>
			</h2>


			<table>
				<thead>
					<tr>
						<th style="width: 20%;">Modified date</th>
						<th>Author name</th>
						<th>Version</th>
						<th>Build</th>
						<th>Actions</th>
					</tr>
				</thead>

				<tbody>
					<tr *ngFor="let guide of guides">
						<td>{{guide.modifiedData | date:'medium'}}</td>
						<td>{{guide.author.pseudo}}</td>
						<td>{{guide.version}}</td>
						<td><app-build-display [guide]="guide"></app-build-display></td>
						<td>
							<a routerLink="/guide/{{guide._id}}"><i class="fas fa-edit"></i>Edit</a>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
</section>
